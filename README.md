## SpringCloud 学习示例项目

---

### 微服务特点

- 按业务划分为一个独立运行的程序，即服务单元
- 服务之间通过http协议通信
- 自动化部署
- 可用不同的编程语言
- 可用不同的存储技术
- 服务集中化管理
- 微服务是一个分布式系统
### 微服务“微”
- 代码量
- 开发时间长短
- 业务大小
### CAP
- C（Consistency 一致性）：数据写入成功，之后读取读到的都是写入后的数据
- A（Availability 可用性）：服务的可用性
- P（Partition-tolerance 分区容错性）：单台或多台服务出现问题后，其他正常的服务仍可以正常提供服务
### 微服务具有的功能
- 服务的注册和发现
- 服务的负载均衡
- 服务的容错
- 服务的网关
- 服务配置的统一管理
- 链路追踪
- 实时日志
### Zookeeper和Eureka
||Zookeeper|Eureka|
|---|---|---|
|CAP|满足CP |满足AP|
|服务注册|当master节点down掉，剩余节点会重新选举leader，耗时30~120s，选取期间整个集群不可用，服务瘫痪|各个节点平等，当请求一个节点失败时会自动切换至另一个节点，但是不保证各个节点的强一致性Eureka还有一种自我保护机制，如果在15分钟内超过85%的节点都没有正常的心跳，那么Eureka就认为客户端与注册中心出现了网络故障，此时会出现以下几种情况： 1.Eureka不再从注册列表中移除因为长时间没收到心跳而应该过期的服务 2.Eureka仍然能够接受新服务的注册和查询请求，但是不会被同步到其它节点上(即保证当前节点依然可用) 3.当网络稳定时，当前实例新的注册信息会被同步到其它节点中|

### 负载均衡

- 将负载分摊到多个执行单元上，常见的两种方式

> - 独立进程单元，通过负载均衡策略，将请求发送到不同的执行单元上，例如Nginx
> - 将负载均衡以代码逻辑的形式封装到服务消费者的客户端上，服务消费者维护了一份服务提供者的信息列表，通过负载均衡策略将请求分摊给多个服务提供者